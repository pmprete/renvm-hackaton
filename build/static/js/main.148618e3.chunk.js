(this["webpackJsonprenvm-hackaton"]=this["webpackJsonprenvm-hackaton"]||[]).push([[0],{1113:function(e,t,n){},474:function(e,t,n){"use strict";(function(e){var a=n(1),r=n.n(a),o=n(7),s=n(50),c=n(109),u=n(108),i=n(59),l=n.n(i),p=n(186),m=n(478),f=n.n(m),b=(n(1113),n(479)),d="0x3aa969d343bd6ae66c4027bb61a382dc96e88150",y=function(t){Object(c.a)(a,t);var n=Object(u.a)(a);function a(t){var c;return Object(s.a)(this,a),(c=n.call(this,t)).componentDidMount=Object(o.a)(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.ethereum){e.next=13;break}return t=window.ethereum,e.prev=2,e.next=5,window.ethereum.enable();case 5:e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(2),c.logError("Please allow access to your Web3 wallet."),e.abrupt("return");case 11:e.next=19;break;case 13:if(!window.web3){e.next=17;break}t=window.web3.currentProvider,e.next=19;break;case 17:return c.logError("Please install MetaMask!"),e.abrupt("return");case 19:return n=new f.a(t),e.next=22,n.eth.net.getId();case 22:if(42===e.sent){e.next=26;break}return c.logError("Please set your network to Kovan."),e.abrupt("return");case 26:c.setState({web3:n},(function(){c.updateBalance(),setInterval((function(){c.updateBalance()}),1e4)})),c.recoverTransfers().catch(c.logError);case 28:case"end":return e.stop()}}),e,null,[[2,7]])}))),c.render=function(){var e=c.state,t=e.balance,n=e.message,a=e.error;return(l.a.createElement("div",{className:"App"},l.a.createElement("p",null,"Balance: ",t," BTC"),l.a.createElement("p",null,l.a.createElement("button",{onClick:function(){return c.deposit().catch(c.logError)}},"Deposit 0.001 BTC")),l.a.createElement("p",null,l.a.createElement("button",{onClick:function(){return c.withdraw().catch(c.logError)}},"Withdraw ",t," BTC")),l.a.createElement("p",null,n),a?l.a.createElement("p",{style:{color:"red"}},a):null))},c.updateBalance=Object(o.a)(r.a.mark((function e(){var t,n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.state.web3,n=new t.eth.Contract(b,d),e.next=4,n.methods.balance().call();case 4:a=e.sent,c.setState({balance:parseInt(a.toString())/Math.pow(10,8)});case 6:case"end":return e.stop()}}),e)}))),c.logError=function(e){console.error(e),c.setState({error:String((e||{}).message||e)})},c.log=function(e){c.setState({message:e})},c.deposit=Object(o.a)(r.a.mark((function e(){var t,n,a,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.state,n=t.web3,a=t.gatewayJS,o=.001,e.prev=2,e.next=5,a.open({sendToken:p.a.Tokens.BTC.Btc2Eth,suggestedAmount:Math.floor(o*Math.pow(10,8)),sendTo:d,contractFn:"deposit",nonce:p.a.utils.randomNonce(),contractParams:[{name:"_msg",type:"bytes",value:n.utils.fromAscii("Depositing ".concat(o," BTC"))}],web3Provider:n.currentProvider}).result();case 5:c.log("Deposited ".concat(o," BTC.")),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),c.logError(e.t0);case 11:case"end":return e.stop()}}),e,null,[[2,8]])}))),c.withdraw=Object(o.a)(r.a.mark((function t(){var n,a,o,s,u,i;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=c.state,a=n.web3,o=n.gatewayJS,s=n.balance,u=s,i=prompt("Enter BTC recipient:"),t.next=5,o.open({sendToken:p.a.Tokens.BTC.Eth2Btc,sendTo:d,contractFn:"withdraw",contractParams:[{name:"_msg",type:"bytes",value:a.utils.fromAscii("Withdrawing ".concat(u," BTC"))},{name:"_to",type:"bytes",value:"0x"+e.from(i).toString("hex")},{name:"_amount",type:"uint256",value:Math.floor(u*Math.pow(10,8))}],web3Provider:a.currentProvider}).result();case 5:c.log("Withdrew ".concat(u," BTC to ").concat(i,"."));case 6:case"end":return t.stop()}}),t)}))),c.recoverTransfers=Object(o.a)(r.a.mark((function e(){var t,n,a,o,s,u,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.state,n=t.web3,a=t.gatewayJS,e.next=3,a.getGateways();case 3:for(o=e.sent,s=0,u=Array.from(o.values());s<u.length;s++)i=u[s],a.recoverTransfer(n.currentProvider,i).pause().result().catch(c.logError);case 5:case"end":return e.stop()}}),e)}))),c.state={balance:0,message:"",error:"",gatewayJS:new p.a("testnet")},c}return a}(l.a.Component);t.a=y}).call(this,n(0).Buffer)},479:function(e){e.exports=JSON.parse('[{"constant":false,"inputs":[{"name":"_msg","type":"bytes"},{"name":"_amount","type":"uint256"},{"name":"_nHash","type":"bytes32"},{"name":"_sig","type":"bytes"}],"name":"deposit","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_msg","type":"bytes"},{"name":"_to","type":"bytes"},{"name":"_amount","type":"uint256"}],"name":"withdraw","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"registry","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"balance","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"inputs":[{"name":"_registry","type":"address"}],"payable":false,"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"name":"_amount","type":"uint256"},{"indexed":false,"name":"_msg","type":"bytes"}],"name":"Deposit","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"_to","type":"bytes"},{"indexed":false,"name":"_amount","type":"uint256"},{"indexed":false,"name":"_msg","type":"bytes"}],"name":"Withdraw","type":"event"}]')},480:function(e,t,n){e.exports=n(481)},481:function(e,t,n){"use strict";n.r(t);var a=n(59),r=n.n(a),o=n(473),s=n.n(o),c=(n(486),n(474));s.a.render(r.a.createElement(c.a,null),document.getElementById("root"))},486:function(e,t,n){},492:function(e,t){},499:function(e,t){},518:function(e,t){},520:function(e,t){},741:function(e,t){},752:function(e,t){}},[[480,1,2]]]);
//# sourceMappingURL=main.148618e3.chunk.js.map